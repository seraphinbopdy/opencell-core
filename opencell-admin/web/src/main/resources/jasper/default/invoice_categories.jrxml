<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 7.0.1-573496633c2b4074e32f433154b543003f7d2498  -->
<jasperReport name="Invoice_categories" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="NoPages" columnWidth="595" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="801855a9-548e-443b-81d5-d27d42b5df88" summaryNewPage="true">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MyInvoiceIssue"/>
	<style name="table">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#FFBFBF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#FFBFBF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TH" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_CH" mode="Opaque" backcolor="#FFBFBF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="Style_1" backcolor="#CCCCCC"/>
	<style name="Text Body" mode="Opaque"/>
	<style name="table 3">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5">
		<box>
			<pen lineWidth="0.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<dataset name="dataset1" uuid="caf372ed-b5fb-4515-871b-63c01682a70b">
		<query language="xPath"><![CDATA[/invoice/amount/taxes/tax]]></query>
		<field name="name" class="java.lang.String">
			<description><![CDATA[name]]></description>
		</field>
		<field name="amountHT" class="java.lang.String">
			<description><![CDATA[amountWithTax]]></description>
		</field>
		<field name="amount" class="java.lang.String">
			<description><![CDATA[amount]]></description>
		</field>
		<field name="percent" class="java.lang.String">
			<description><![CDATA[percent]]></description>
		</field>
		<field name="vatex" class="java.lang.String">
			<description><![CDATA[vatex]]></description>
		</field>
		<field name="total" class="java.lang.String">
			<description><![CDATA[ancestor::taxes/@total]]></description>
		</field>
		<field name="currencySymbol" class="java.lang.String">
			<description><![CDATA[ancestor::invoice/amount/currencySymbol]]></description>
		</field>
		<sortField name="percent"/>
	</dataset>
	<dataset name="dataset2" uuid="2c95a6f3-7268-4da8-a6b6-bfd49ec339b3">
		<query language="xPath"><![CDATA[/invoice/header/discounts/discount]]></query>
		<field name="name" class="java.lang.String">
			<description><![CDATA[name]]></description>
		</field>
		<field name="amountHT" class="java.lang.String">
			<description><![CDATA[amountHT]]></description>
		</field>
		<field name="amount" class="java.lang.String">
			<description><![CDATA[amount]]></description>
		</field>
		<field name="percent" class="java.lang.String">
			<description><![CDATA[percent]]></description>
		</field>
		<field name="discountAmountWithoutTax" class="java.math.BigDecimal">
			<description><![CDATA[sum(/invoice/header/discounts/discount/@discountTransactionalAmountWithoutTax)]]></description>
		</field>
		<variable name="discountAmountWithoutTax_total" calculation="Sum" class="java.lang.Double">
			<expression><![CDATA[$F{discountAmountWithoutTax}]]></expression>
			<initialValueExpression><![CDATA[$F{discountAmountWithoutTax}]]></initialValueExpression>
		</variable>
	</dataset>
	<dataset name="categoryDataset" uuid="caf372ed-b5fb-4515-871b-63c01682a70b">
		<query language="xPath"><![CDATA[/invoice/header/categories/category]]></query>
		<field name="categoryCode" class="java.lang.String">
			<description><![CDATA[@code]]></description>
		</field>
		<field name="categoryLabel" class="java.lang.String">
			<description><![CDATA[@label]]></description>
		</field>
		<field name="categoryAmountWithTax" class="java.lang.String">
			<description><![CDATA[amountWithoutTax]]></description>
		</field>
		<field name="country" class="java.lang.String">
			<description><![CDATA[/invoice/@country]]></description>
		</field>
		<field name="language" class="java.lang.String">
			<description><![CDATA[/invoice/@language]]></description>
		</field>
		<field name="currencySymbol" class="java.lang.String">
			<description><![CDATA[/invoice/amount/currencySymbol]]></description>
		</field>
		<sortField name="categoryCode"/>
	</dataset>
	<parameter name="logoPath" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["./"]]></defaultValueExpression>
	</parameter>
	<parameter name="messagePath" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["./"]]></defaultValueExpression>
	</parameter>
	<parameter name="xmlDateFormat" forPrompting="false" class="java.lang.String">
		<defaultValueExpression><![CDATA["yyyyMMdd"]]></defaultValueExpression>
	</parameter>
	<query language="xPath"><![CDATA[/invoice/header/categories]]></query>
	<field name="invoiceCodeTypeLabel" class="java.lang.String">
		<description><![CDATA[/invoice/@invoiceCodeTypeLabel]]></description>
		<property name="net.sf.jasperreports.xpath.field.expression" value="/invoice/@invoiceCodeTypeLabel"/>
	</field>
	<field name="country" class="java.lang.String">
		<description><![CDATA[/invoice/@country]]></description>
		<property name="net.sf.jasperreports.xpath.field.expression" value="/invoice/@country"/>
	</field>
	<field name="language" class="java.lang.String">
		<description><![CDATA[/invoice/@language]]></description>
		<property name="net.sf.jasperreports.xpath.field.expression" value="/invoice/@language"/>
	</field>
	<field name="catCode" class="java.lang.String">
		<description><![CDATA[/invoice/header/categories/category/@code]]></description>
	</field>
	<field name="catLabel" class="java.lang.String">
		<description><![CDATA[/invoice/header/categories/category/@label]]></description>
	</field>
	<field name="catAmountWithoutTax" class="java.lang.Double">
		<description><![CDATA[/invoice/header/categories/category/transactionalAmountWithoutTax]]></description>
	</field>
	<field name="currencySymbol" class="java.lang.String">
		<description><![CDATA[/invoice/amount/currencySymbol]]></description>
	</field>
	<field name="currencyLabel" class="java.lang.String">
		<description><![CDATA[/invoice/amount/currencyLabel]]></description>
	</field>
	<field name="currencyRate" class="java.lang.String">
		<description><![CDATA[/invoice/amount/currencyRate]]></description>
		<property name="net.sf.jasperreports.xpath.field.expression" value="/invoice/amount/currencyRate"/>
	</field>
	<field name="total" class="java.lang.String">
		<description><![CDATA[ancestor::taxes/@total]]></description>
	</field>
	<field name="discountAmountWithoutTax" class="java.lang.Double">
		<description><![CDATA[sum(/invoice/detail/userAccounts/userAccount/categories/category/subCategories/subCategory/line/article[@allowanceCode='95']/ancestor::line/transactionalAmountWithoutTax)]]></description>
	</field>
	<field name="discountCustomerAmountWithoutTax" class="java.math.BigDecimal">
		<description><![CDATA[sum(/invoice/header/discounts/discount/@discountTransactionalAmountWithoutTax)]]></description>
	</field>
	<variable name="discountAmountWithoutTax_total" calculation="Sum" class="java.lang.Double">
		<expression><![CDATA[$F{discountCustomerAmountWithoutTax}]]></expression>
		<initialValueExpression><![CDATA[$F{discountCustomerAmountWithoutTax}]]></initialValueExpression>
	</variable>
	<variable name="totalAmountWithoutTax" calculation="Sum" class="java.lang.Double">
		<expression><![CDATA[$F{catAmountWithoutTax}]]></expression>
	</variable>
	<group name="subCategory"/>
	<group name="1">
		<expression><![CDATA[$F{catLabel}]]></expression>
		<groupHeader>
			<band height="86">
				<element kind="textField" uuid="5d7f0c02-8094-464f-a79f-bea5b34c4549" x="3" y="64" width="350" height="19" forecolor="#878787" fontName="SansSerif" fontSize="9.0" bold="false" hTextAlign="Left" vTextAlign="Bottom">
					<expression><![CDATA[(($F{currencyRate}!=null && !String.valueOf($F{currencyRate}).isEmpty() && !String.valueOf($F{currencyRate}).equals("null") && new Double($F{currencyRate}.replace(",", ".")) > 1d) ? ($F{language}=="FRA" ? "Taux appliqué sur EURO : " : "Rate applied against EUR : ") + (($F{country}=="FR" || $F{country}=="UK") ? (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.FRENCH)).format(new Double($F{currencyRate}.replace(",", ".")))) : (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.US)).format(new Double($F{currencyRate}.replace(",", "."))))) + " " + $F{currencySymbol} : "")]]></expression>
					<box bottomPadding="2"/>
				</element>
				<element kind="textField" uuid="7d5c0eb6-5bba-4eb0-a030-9906e068f959" x="6" y="-13" width="220" height="20" forecolor="#000000" fontName="SansSerif" fontSize="11.0" hTextAlign="Left" vTextAlign="Middle">
					<printWhenExpression><![CDATA[$F{discountAmountWithoutTax}!=null && $F{discountAmountWithoutTax} > 0]]></printWhenExpression>
					<expression><![CDATA[($F{language}==("FRA") ? "Remises" : "Discounts")]]></expression>
					<box leftPadding="0"/>
				</element>
				<element kind="textField" uuid="4915e701-b4f7-4af3-956d-bbcc019ee2da" positionType="Float" x="220" y="-13" width="130" height="20" fontName="SansSerif" fontSize="11.0" evaluationTime="Group" pattern="#,##0.00;-#,##0.00" evaluationGroup="1" blankWhenNull="true" hTextAlign="Right" vTextAlign="Middle">
					<printWhenExpression><![CDATA[$F{discountAmountWithoutTax}!=null && $F{discountAmountWithoutTax} > 0]]></printWhenExpression>
					<paragraph rightIndent="0"/>
					<expression><![CDATA[($F{country}=="FR" || $F{country}=="UK") ? (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.FRENCH)).format(new Double($F{discountAmountWithoutTax})) + " " + $F{currencySymbol}) : (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.US)).format(new Double($F{discountAmountWithoutTax})) + " " + $F{currencySymbol})]]></expression>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<box rightPadding="0"/>
				</element>
				<element kind="textField" uuid="db67062e-c20f-400b-8094-3f03dbdb083b" x="6" y="36" width="220" height="20" forecolor="#000000" fontName="SansSerif" fontSize="11.0" hTextAlign="Left" vTextAlign="Middle">
					<printWhenExpression><![CDATA[$F{discountCustomerAmountWithoutTax}!=null && $F{discountCustomerAmountWithoutTax} != 0]]></printWhenExpression>
					<expression><![CDATA[($F{language}==("FRA") ? "Remise client" : "Customer discount")]]></expression>
					<box leftPadding="0"/>
				</element>
				<element kind="textField" uuid="55833039-2e84-4f99-b795-d8abda87bf46" positionType="Float" x="220" y="36" width="130" height="20" fontName="SansSerif" fontSize="11.0" evaluationTime="Group" pattern="#,##0.00;-#,##0.00" evaluationGroup="1" blankWhenNull="true" hTextAlign="Right" vTextAlign="Middle">
					<printWhenExpression><![CDATA[$F{discountCustomerAmountWithoutTax}!=null && $F{discountCustomerAmountWithoutTax} != 0]]></printWhenExpression>
					<paragraph rightIndent="0"/>
					<expression><![CDATA[($F{country}=="FR" || $F{country}=="UK") ? (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.FRENCH)).format(new Double($F{discountCustomerAmountWithoutTax})) + " " + $F{currencySymbol}) : (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.US)).format(new Double($F{discountCustomerAmountWithoutTax})) + " " + $F{currencySymbol})]]></expression>
					<property name="com.jaspersoft.studio.unit.rightIndent" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<box rightPadding="0"/>
				</element>
			</band>
			<band height="21">
				<element kind="line" uuid="0958cfc5-2a2e-43aa-a471-b7ed2cb5f8c2" x="0" y="-81" width="350" height="1" forecolor="#999999">
					<printWhenExpression><![CDATA[$F{discountAmountWithoutTax}!=null && $F{discountAmountWithoutTax} > 0]]></printWhenExpression>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<pen lineWidth="0.5" lineColor="#CCCCCC"/>
				</element>
				<element kind="line" uuid="c966c225-1007-4b3a-ae29-bfc3c1b25f7b" x="0" y="-32" width="350" height="1" forecolor="#999999">
					<printWhenExpression><![CDATA[$F{discountCustomerAmountWithoutTax}!=null && $F{discountCustomerAmountWithoutTax} != 0]]></printWhenExpression>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<pen lineWidth="0.5" lineColor="#CCCCCC"/>
				</element>
			</band>
		</groupHeader>
	</group>
	<group name="2">
		<groupHeader>
			<band/>
		</groupHeader>
	</group>
	<columnHeader height="55">
		<element kind="textField" uuid="2e8b6884-3f93-416d-86a0-0230e50671bc" mode="Opaque" x="0" y="4" width="350" height="23" forecolor="#030303" backcolor="#F2F4F5" fontName="SansSerif" fontSize="14.0" bold="true" hTextAlign="Left" vTextAlign="Middle">
			<expression><![CDATA[($F{language}=="FRA" ? "Ma " : "My ") + (($F{invoiceCodeTypeLabel}==null || $F{invoiceCodeTypeLabel}.isEmpty()) ? ($F{language}=="FRA" ? "Facture" : "Invoice") : $F{invoiceCodeTypeLabel})]]></expression>
			<property name="com.jaspersoft.studio.unit.x" value="px"/>
			<property name="com.jaspersoft.studio.unit.y" value="px"/>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<box topPadding="0" leftPadding="6" bottomPadding="0" rightPadding="0">
				<pen lineWidth="5.0" lineColor="#FF8C00"/>
				<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="1.5" lineStyle="Solid" lineColor="#FF0000"/>
				<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="textField" uuid="25323b57-0dfa-42e9-aa61-db50b3f30b6f" x="190" y="3" width="158" height="19" forecolor="#030303" fontName="SansSerif" fontSize="11.0" bold="false" hTextAlign="Right" vTextAlign="Bottom">
			<expression><![CDATA[($F{language}=="FRA" ? "Prix HT" : "Price w/o tax")]]></expression>
			<box bottomPadding="2"/>
		</element>
		<element kind="component" uuid="a38f6a7f-8f3c-44b7-9015-b82312e77752" key="" positionType="Float" stretchType="ElementGroupHeight" x="0" y="25" width="350" height="25" forecolor="#000000" printRepeatedValues="false" printWhenDetailOverflows="true">
			<component kind="table" whenNoDataType="Blank">
				<datasetRun uuid="a2fa51fa-35e6-4d8c-810b-a1404c5f82ad" subDataset="categoryDataset">
					<dataSourceExpression><![CDATA[$P{REPORT_DATA_SOURCE}.dataSource("/invoice/header/categories/category")]]></dataSourceExpression>
				</datasetRun>
				<column kind="single" uuid="c59facdb-0d21-4e72-805c-2c09dc0942db" width="250">
					<detailCell height="15" rowSpan="1">
						<element kind="textField" uuid="c0ec5bf7-40b5-43c7-bee1-a37933621f35" x="0" y="0" width="250" height="15" fontName="SansSerif" fontSize="11.0" pattern="#,##0.00" blankWhenNull="true" bold="false" hTextAlign="Left" vTextAlign="Middle">
							<expression><![CDATA["  " + $F{categoryLabel}]]></expression>
						</element>
						<box>
							<pen lineWidth="0.0" lineColor="#CCCCCC"/>
							<topPen lineWidth="0.0" lineColor="#CCCCCC"/>
							<leftPen lineWidth="0.0" lineColor="#CCCCCC"/>
							<bottomPen lineWidth="0.5" lineColor="#CCCCCC"/>
							<rightPen lineWidth="0.0" lineColor="#CCCCCC"/>
						</box>
					</detailCell>
				</column>
				<column kind="single" uuid="f0dd554f-0e45-48b8-9ec1-12ad3778b4fa" width="100">
					<detailCell height="15" rowSpan="1">
						<element kind="textField" uuid="1e3f7582-2725-4993-b847-5fc108a1764f" x="0" y="0" width="100" height="15" fontName="SansSerif" fontSize="11.0" blankWhenNull="true" bold="false" hTextAlign="Right" vTextAlign="Middle">
							<expression><![CDATA[($F{country}=="FR" || $F{country}=="UK") ? (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.FRENCH)).format(new Double($F{categoryAmountWithTax})) + " " + $F{currencySymbol}) : (new java.text.DecimalFormat("#,##0.00", java.text.DecimalFormatSymbols.getInstance(Locale.US)).format(new Double($F{categoryAmountWithTax})) + " " + $F{currencySymbol})]]></expression>
						</element>
						<box>
							<pen lineWidth="0.0" lineColor="#CCCCCC"/>
							<topPen lineWidth="0.0" lineColor="#CCCCCC"/>
							<leftPen lineWidth="0.0" lineColor="#CCCCCC"/>
							<bottomPen lineWidth="0.5" lineColor="#CCCCCC"/>
							<rightPen lineWidth="0.0" lineColor="#CCCCCC"/>
						</box>
					</detailCell>
				</column>
			</component>
		</element>
	</columnHeader>
	<columnFooter height="39"/>
</jasperReport>
